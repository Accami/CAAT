<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

    <title>CAAT example: Coordinate system demo</title>

</head>
<body style="border:0; margin:0;">

<div id="c" style="overflow:hidden; left:0; top:0; width:100%; height:100%;"></div>

</body>
<script type="text/javascript" src="../../../build/caat-css.js"></script>
<script type="text/javascript">
    /**
     * @license
     *
     * The MIT License
     * Copyright (c) 2010-2011 Ibon Tolosana, Hyperandroid || http://labs.hyperandroid.com/

     * Permission is hereby granted, free of charge, to any person obtaining a copy
     * of this software and associated documentation files (the "Software"), to deal
     * in the Software without restriction, including without limitation the rights
     * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
     * copies of the Software, and to permit persons to whom the Software is
     * furnished to do so, subject to the following conditions:

     * The above copyright notice and this permission notice shall be included in
     * all copies or substantial portions of the Software.

     * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
     * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
     * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
     * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
     * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
     * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
     * THE SOFTWARE.
     *
     */

    (function() {
        /**
         * Startup it all up when the document is ready.
         * Change for your favorite frameworks initialization code.
         */
        window.addEventListener(
                'load',
                init,
                false);

        function init() {

            var director= new CAAT.Director().initialize( 800, 600, document.getElementById('c') ).setClear(false);
            director.enableResizeEvents( CAAT.Director.prototype.RESIZE_PROPORTIONAL );

            new CAAT.ImagePreloader().loadImages(
                [
                    {id:'img',    url: "wait.png"}
                ],
                function( counter, images ) {

                    if ( counter==images.length ) {
                        director.setImagesCache(images);

                        var scene= director.createScene();

                        var cc= new CAAT.ActorContainer().
                            setBounds( 0,0,director.width,director.height );
                        cc.setGestureEnabled(true);

                        scene.addChild(cc);

                        var np = 20;
                        var s = 80;
                        for ( var i = 0; i < np; i++) {
                            var sc= 1+Math.random()*.25;

                            var p = new CAAT.Actor().
                                setLocation(
                                    Math.random() * director.width,
                                    Math.random()* director.height ).
                                setRotation( Math.PI*2*Math.random() ).
                                setScale( sc, sc ).
                                setFillStyle('#ff3fff').
                                setBackgroundImage( director.getImage( "img" ) ).
                                setImageTransformation( CAAT.SpriteImage.prototype.TR_FIXED_TO_SIZE );

                            p.enableDrag();
                            p.setGestureEnabled(true);

                            p.mouseEnter= function(ev) {
                                var parent= ev.source.parent;
                                parent.setZOrder(ev.source,Number.MAX_VALUE);
                            }

                            cc.addChild(p);
                        }
                    }
                });

            CAAT.loop(60);
        }

    })();
</script>
</html>